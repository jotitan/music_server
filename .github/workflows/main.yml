# Workflow to build at each commit in master the application

name: CI build music server player

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2

      # Build server
      - name: Build micro music player
        run: |
          echo Run build micro music player
          export GOOS=linux
          export GOARCH=arm
          cd src
          go build -o music_player main/run_agent_player.go
          mkdir artifacts
          echo Copy music player in artifacts/
          mv music_player artifacts
      # Upload artifact
      - uses: actions/upload-artifact@v1
        with:
          name: Artifacts music player
          path: artifacts
